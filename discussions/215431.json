[
  {
    "Id": "453408",
    "ThreadId": "215431",
    "Html": "Hi I have some issues parsing html based CFM file ColdFusion file, the Html Agility parse parses 98 % of the file correct, at the end of the file, the parser flag a tag as a text, I tried it in code, and using Html Agility Pack Tester, and I got the same result, the paser classified the tag &lt;/form&gt; as text..\r\n\r\nThe following is the file:\r\n\r\nThe issue is in the 3rd tag from the end, the closing of form tag &lt;/form&gt;\r\n\r\n<br> <br> \r\n \r\n \r\n\r\n&lt;cfset section=&quot;contact&quot;&gt;\r\n&lt;cfset pagetitle = &quot;Contact Miramichi Black Rapids Lodge&quot;&gt;\r\n&lt;cfset sectionname=&quot;Contact Miramichi Black Rapids Lodge&quot;&gt;\r\n&lt;cfset description = &quot;The Miramichi Black Rapids Lodge atmosphere is casual, inviting, and provides a welcome respite from an intense day of fly fishing. We strive to exceed customer expectations in the delivery of quality amenities and services, and our lodge shows it.&quot;&gt;\r\n&lt;cfset keywords = &quot;Miramichi River in New Brunswick,Miramichi River, Miramichi River New Brunswick, miramichi, lodge, river, black rapids, rapids, rapids lodge, black, black rapids lodge, miramichi river, miramichi black, miramichi black rapids, sporting, salmon, fly fishing, fly casting&quot;&gt;\r\n&lt;cfparam name=&quot;URL.submitted&quot; default=&quot;no&quot;&gt;\r\n\r\n&lt;cfinclude template=&quot;/scripts/header.cfm&quot;&gt;\r\n\r\n&lt;table border=&quot;0&quot; cellpadding=&quot;0&quot; cellspacing=&quot;0&quot; width=&quot;100%&quot;&gt;\r\n&lt;tr&gt;\r\n&lt;td valign=&quot;top&quot;&gt;\r\n\r\n&amp;nbsp;&lt;br /&gt;\t\r\n&lt;p&gt;Miramichi Black Rapids Lodge&lt;br /&gt;\r\nP.O. Box 1025&lt;br /&gt;\r\nBlackville NB E9B 1R8 Canada&lt;br /&gt;\r\n  Phone: 506.843.2346&lt;br /&gt;\r\n  Fax: 205.562.5014&lt;br /&gt;\r\n  Email: &lt;script type=text/javascript&gt;\r\nvar to   = &quot;BRSLodge&quot;;\r\nvar here = &quot;westervelt.com&quot;;\r\nvar all   = to + &quot;@&quot; + here;\r\ndocument.write(&quot;&lt;a href='mailto:&quot;+all+&quot;'&gt;&quot;+all+&quot;&lt;/a&gt;&quot;);\r\n&lt;/script&gt;\r\n&lt;/p&gt;\r\n\r\n&lt;/td&gt;\r\n&lt;td&gt;&amp;nbsp;&amp;nbsp;&amp;nbsp;&lt;/td&gt;\r\n&lt;td align=&quot;right&quot;&gt;\r\n\r\n&lt;iframe width=&quot;350&quot; height=&quot;285&quot; frameborder=&quot;0&quot; scrolling=&quot;no&quot; marginheight=&quot;0&quot; marginwidth=&quot;0&quot; src=&quot;http://maps.google.ca/maps?f=q&amp;amp;hl=en&amp;amp;geocode=&amp;amp;q=46.760547,-65.775898&amp;amp;ie=UTF8&amp;amp;z=14&amp;amp;iwloc=addr&amp;amp;om=0&amp;amp;ll=46.767264,-65.771713&amp;amp;output=embed&amp;amp;s=AARTsJqVWULastUEprfiuO68PLK7FRhCNA&quot;&gt;&lt;/iframe&gt;&lt;br /&gt;&lt;small&gt;&lt;a href=&quot;http://maps.google.ca/maps?f=q&amp;amp;hl=en&amp;amp;geocode=&amp;amp;q=46.760547,-65.775898&amp;amp;ie=UTF8&amp;amp;z=14&amp;amp;iwloc=addr&amp;amp;om=0&amp;amp;ll=46.767264,-65.771713&amp;amp;source=embed&quot; style=&quot;color:#0000FF;text-align:left&quot;&gt;View Larger Map&lt;/a&gt;&lt;/small&gt;\r\n\r\n&lt;/td&gt;\r\n&lt;/tr&gt;\r\n&lt;/table&gt;\r\n \r\n&lt;hr width=&quot;85%&quot; align=&quot;center&quot; /&gt;\r\n\r\n&lt;cfif URL.submitted IS &quot;yes&quot;&gt;\r\n\r\n&lt;p&gt;Thank you for submitting your comments or questions. Should you require an answer, we will make every effort to respond as soon as possible.&lt;/p&gt;\r\n\r\n&lt;cfelse&gt;\r\n\r\n&lt;h3&gt;We Want To Hear From You&lt;/h3&gt;\r\n\r\n&lt;p&gt;We welcome your questions and comments and will make every effort to respond to your needs as soon as possible.&lt;/p&gt;\r\n\r\n&lt;p style=&quot;font-size:10px;&quot;&gt;Fields marked in &lt;strong&gt;bold&lt;/strong&gt; are required.&lt;/p&gt;\r\n\r\n&lt;img src=&quot;/images/lodge-sign.jpg&quot; class=&quot;rightimage&quot; align=&quot;right&quot;&gt;&lt;form action=&quot;send.cfm&quot; method=&quot;POST&quot; enctype=&quot;multipart/form-data&quot; name=&quot;Contact&quot;&gt;\r\n&lt;table&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;Name&lt;/strong&gt; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;25&quot; name=&quot;Name&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;E-mail&lt;/strong&gt; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;25&quot; name=&quot;Email&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;Phone &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;10&quot; name=&quot;Phone&quot; maxlength=&quot;25&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;Address&lt;/strong&gt; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;25&quot; name=&quot;Address1&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&amp;nbsp; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;25&quot; name=&quot;Address2&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;City&lt;/strong&gt; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;25&quot; name=&quot;City&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;Province or State&lt;/strong&gt; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;10&quot; name=&quot;State&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;Zip &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;10&quot; name=&quot;Zip&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;How did you hear about us? &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input size=&quot;25&quot; name=&quot;Hear&quot; maxlength=&quot;150&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;My Interests&lt;br /&gt;(check all that apply) &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;middle&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;InterestAngling&quot; value=&quot;1&quot; /&gt; Angling&lt;br /&gt;&lt;input type=&quot;checkbox&quot; name=&quot;InterestWingshooting&quot; value=&quot;1&quot; /&gt; Wingshooting&lt;br /&gt;&lt;input type=&quot;checkbox&quot; name=&quot;InterestEco&quot; value=&quot;1&quot; /&gt; Eco-Tourism&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;strong&gt;Comments&lt;/strong&gt; &lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;textarea rows=&quot;6&quot; cols=&quot;40&quot; name=&quot;Comments&quot;&gt;&lt;/textarea&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;middle&quot; align=&quot;right&quot;&gt;&amp;nbsp;&lt;/td&gt;\r\n\t\t&lt;td valign=&quot;middle&quot;&gt;&lt;input type=&quot;checkbox&quot; name=&quot;Marketing&quot; value=&quot;1&quot; /&gt; I would like to receive news from Miramichi Black Rapids Lodge&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n\t&lt;tr&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;/td&gt;\r\n\t\t&lt;td valign=&quot;top&quot;&gt;&lt;input type=&quot;submit&quot; value=&quot;Submit&quot;&gt;&lt;/td&gt;\r\n\t&lt;/tr&gt;\r\n&lt;/table&gt;\r\n&lt;/form&gt;\r\n\r\n&lt;/cfif&gt;\r\n\r\n&lt;cfinclude template=&quot;/scripts/footer.cfm&quot;&gt;\r\n\r\n\r\n",
    "PostedDate": "2010-06-09T01:47:51.453-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "563543",
    "ThreadId": "215431",
    "Html": "\r\n<p>as far as i understand the problem, I've got the same issue...</p>\r\n<p>if there's html code like this:</p>\r\n<p>&lt;div&gt;&lt;form&gt;&lt;input&gt;&lt;input&gt;&lt;/form&gt;&lt;/div&gt;</p>\r\n<p>and we're building document class using html agility pack we're going to have a structure like this:</p>\r\n<p>parent node &quot;div&quot; with 4 child nodes with names &quot;form&quot;, &quot;input&quot;, &quot;input&quot;, &quot;#text&quot;</p>\r\n<p>while I'd rather expect &quot;div&quot; having one child node &quot;form&quot; which should have 2 child &quot;input&quot; nodes</p>\r\n<p>&nbsp;</p>\r\n<p>for another example check this C# code (it's creating simmilar to above structure gets the InnerHtml and sets it to THE SAME VALUE, but after all it gives different structure):</p>\r\n<p>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HtmlDocument doc = new HtmlDocument();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; HtmlNode docNode = new HtmlNode(HtmlNodeType.Document, doc, 0);<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docNode.AppendChild(new HtmlNode(HtmlNodeType.Element, doc, 0) { Name = &quot;form&quot; });<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docNode.FirstChild.AppendChild(new HtmlNode(HtmlNodeType.Element, doc, 0) { Name = &quot;input&quot; });<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docNode.FirstChild.AppendChild(new HtmlNode(HtmlNodeType.Element, doc, 0) { Name = &quot;input&quot; });<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docNode.FirstChild.AppendChild(new HtmlNode(HtmlNodeType.Element, doc, 0) { Name = &quot;input&quot; });<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(docNode.ChildNodes.Count); //1<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (var child in docNode.ChildNodes)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(child.Name);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //form<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; string docNodeInnerHtml = docNode.InnerHtml;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(docNodeInnerHtml);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docNode.InnerHtml = &quot;&quot;;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; docNode.InnerHtml = docNodeInnerHtml;<br>\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(docNode.ChildNodes.Count); //5<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; foreach (var child in docNode.ChildNodes)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Console.WriteLine(child.Name);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //form<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //input<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //input<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //input<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; //text</p>\r\n<p>&nbsp;</p>\r\n<p>is there any kind of way to fix it? or some settings i've not yet noticed should be changed to make it work as I'd expect?</p>\r\n",
    "PostedDate": "2011-02-09T12:48:59.933-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "564068",
    "ThreadId": "215431",
    "Html": "\r\n<p>After some more and more research about this problem I've found what is the solution, all we have to do is putting one line of code before importing html data:</p>\r\n<p><span style=\"color:#000000; font-family:'MS Shell Dlg 2'; font-size:8pt\">HtmlNode.ElementsFlags.Remove(&quot;form&quot;);</span></p>\r\n<p>I'm not sure yet why and what for, I don't know yet what's this static collection for (I still need to check it) , but if anyone more is looknig for a solution - this works :)</p>\r\n",
    "PostedDate": "2011-02-10T09:32:40.83-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]