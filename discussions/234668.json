[
  {
    "Id": "521868",
    "ThreadId": "234668",
    "Html": "\r\n<p>Hi, I'm getting strange results when using either&nbsp;SelectNodes or&nbsp;GetElementbyId.</p>\r\n<p>After Loading Facebook's photos page:&nbsp;<span style=\"font-size:13.3333px\">http://www.facebook.com/username?v=photos</span></p>\r\n<p><span style=\"font-size:13.3333px\">to an&nbsp;HtmlDocument object using LoadHtml</span></p>\r\n<p>i'm trying to get the first table on the page as such:&nbsp;HtmlNode table = pics_page.DocumentNode.SelectNodes(&quot;//table&quot;)[0];</p>\r\n<p>but&nbsp;SelectNodes doesn't seems to find the table i'm after, whys that?</p>\r\n<p>Also&nbsp;I've&nbsp;tried using&nbsp;GetElementbyId couple of times on numerous html sources and i'm not sure why it won't find the element i'm after, i've found the following which shad some light&nbsp;<a href=\"http://stackoverflow.com/questions/2385840/how-to-get-all-input-elements-in-a-form-with-htmlagilitypack\"></a><a href=\"http://stackoverflow.com/questions/2385840/how-to-get-all-input-elements-in-a-form-with-htmlagilitypack\">http://stackoverflow.com/questions/2385840/how-to-get-all-input-elements-in-a-form-with-htmlagilitypack</a></p>\r\n<p>But it didn't solved my problem, Any idea why&nbsp;GetElementbyId fails to find the element with the given id?<br>\r\nThank you.</p>\r\n",
    "PostedDate": "2010-11-14T14:00:33.79-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "524196",
    "ThreadId": "234668",
    "Html": "\r\n<p>Did you logged in to site? Set debug breakpoint and look to html source - this will show where is problem.</p>\r\n",
    "PostedDate": "2010-11-18T23:46:47.827-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "524253",
    "ThreadId": "234668",
    "Html": "\r\n<p>Heres the html&nbsp;of the&nbsp;image which i'm trying to get a hold of:</p>\r\n<p>Escaped:<br>\r\n<span style=\"font-family:Consolas,'Courier New',Courier,monospace; font-size:13.3333px; white-space:pre\">&lt;img class=\\&quot;logo img\\&quot; src=\\&quot;http:\\/\\/profile.ak.fbcdn.net\\/hprofile-ak-snc4\\/hs447.snc4\\/IMAGE_FILE_NAME.jpg\\&quot; alt=\\&quot;USER_NAME\\&quot; id=\\&quot;profile_pic\\&quot;\r\n \\/&gt;</span></p>\r\n<p>Unescape:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">img</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;logo img&quot;</span> <span style=\"color:red\">src</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;http://profile.ak.fbcdn.net/hprofile-ak-snc4/hs447.snc4/IMAGE_FILE_NAME.jpg&quot;</span> <span style=\"color:red\">alt</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;USER_NAME&quot;</span> <span style=\"color:red\">id</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;profile_pic&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n</pre>\r\n</div>\r\n<div style=\"color:black; background-color:white\">\r\n<pre style=\"color:black\"><span style=\"font-size:13.3333px\"><br></span></pre>\r\n<pre style=\"color:black\"><span style=\"font-size:13.3333px\">As you can see the original string is escaped, I've tried removing all html escaping and still couldn't get my image element.</span></pre>\r\n<pre><span style=\"font-size:13.3333px\">the html is retrieved using the following code:<br><div style=\"color:black; background-color:white\"><pre><span style=\"color:blue\">public</span> <span style=\"color:blue\">string</span> GET(Uri address)\r\n        {\r\n            \r\n            webRequest = WebRequest.Create(address) <span style=\"color:blue\">as</span> HttpWebRequest;\r\n            webRequest.CookieContainer = cookies;\r\n            webRequest.Method = <span style=\"color:#a31515\">&quot;GET&quot;</span>;\r\n            webRequest.UserAgent = <span style=\"color:#a31515\">&quot;Mozilla/5.0 (Windows; U; Windows NT 6.1; en-US) AppleWebKit/534.7 (KHTML, like Gecko) Chrome/7.0.517.41 Safari/534.7&quot;</span>;\r\n\r\n            StreamReader sr = <span style=\"color:blue\">null</span>;\r\n            WebResponse webResponse = <span style=\"color:blue\">null</span>;\r\n            <span style=\"color:blue\">string</span> response = <span style=\"color:#a31515\">&quot;&quot;</span>;\r\n            <span style=\"color:blue\">try</span>\r\n            {\r\n                webResponse = webRequest.GetResponse();\r\n                sr = <span style=\"color:blue\">new</span> StreamReader(webResponse.GetResponseStream());\r\n                response = sr.ReadToEnd().Trim();\r\n            }\r\n            <span style=\"color:blue\">catch</span> (WebException ex)\r\n            {\r\n\r\n            }\r\n            <span style=\"color:blue\">finally</span>\r\n            {\r\n                <span style=\"color:blue\">if</span> (webResponse == <span style=\"color:blue\">null</span>)\r\n                {\r\n                    webResponse.Close();\r\n                }\r\n                <span style=\"color:blue\">if</span> (sr != <span style=\"color:blue\">null</span>)\r\n                {\r\n                    sr.Close();\r\n                }\r\n            }\r\n            <span style=\"color:blue\">return</span> response;\r\n        }</pre>\r\n<pre><span style=\"font-size:13.3333px\"><br></span></pre>\r\n<pre><span style=\"font-size:13.3333px\">Where the uri is Facebook's profile page: http://www.facebook.com/profile.php?id=user_id</span></pre>\r\n</div>\r\n</span></pre>\r\n<pre><span style=\"font-size:13.3333px\">Then the response gets loaded into an HtmlDocument object using the LoadHtml method.</span></pre>\r\n<pre><span style=\"font-size:13.3333px\">I'm quite sure the problem is with facebook's html.</span></pre>\r\n<pre><span style=\"font-size:13.3333px\"><br></span></pre>\r\n<pre><span style=\"font-size:13.3333px\">Thank you,</span></pre>\r\n</div>\r\n",
    "PostedDate": "2010-11-19T02:27:36.32-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "526264",
    "ThreadId": "234668",
    "Html": "\r\n<p>I don't have facebook account (it is poison:-)) ) So I can't be 100% sure, and can't test query and look to html, but somewhy I don't believe that html in facebook is mallformed. I repeat my question: did you logged in with your code to facebook? If not,\r\n you won't get any pictures and etc (I presume, that pictures is in private area). When you visit facebook with IE or FF you may think, that everything works straight from beginning, but you forgetting, that your browser can have cookie, which stores login\r\n information (session id), which was created a weeks ago. Htmlagilitypack doesn't have this login information, so you need login, get cookie and only then you will have possibility to traverse profile information, look for friends and etc.</p>\r\n<p>Simple sample:</p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">html</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">head</span><span style=\"color:blue\">&gt;</span><span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">head</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">body</span><span style=\"color:blue\">&gt;</span>\r\n&lt;img class=\\&quot;logo img\\&quot; src=\\&quot;http:\\/\\/profile.ak.fbcdn.net\\/hprofile-ak-snc4\\/hs447.snc4\\/IMAGE_FILE_NAME.jpg\\&quot; alt=\\&quot;USER_NAME\\&quot; id=\\&quot;profile_pic1\\&quot; \\/&gt;\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">img</span> <span style=\"color:red\">class</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;logo img&quot;</span> <span style=\"color:red\">src</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;http://profile.ak.fbcdn.net/hprofile-ak-snc4/hs447.snc4/IMAGE_FILE_NAME.jpg&quot;</span> <span style=\"color:red\">alt</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;USER_NAME&quot;</span> <span style=\"color:red\">id</span><span style=\"color:blue\">=</span><span style=\"color:blue\">&quot;profile_pic2&quot;</span> <span style=\"color:blue\">/&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">body</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">html</span><span style=\"color:blue\">&gt;</span>\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p></p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre>HtmlDocument doc = <span style=\"color:blue\">new</span> HtmlDocument();\r\ndoc.Load(<span style=\"color:#a31515\">&quot;Sample/Sample1.html&quot;</span>);\r\n<span style=\"color:blue\">if</span> (doc.DocumentNode.SelectSingleNode(<span style=\"color:#a31515\">&quot;//*[contains(@id, 'profile_pic1')]&quot;</span>) != <span style=\"color:blue\">null</span>) Console.WriteLine(<span style=\"color:#a31515\">&quot;Match1&quot;</span>); ;\r\n<span style=\"color:blue\">if</span> (doc.DocumentNode.SelectSingleNode(<span style=\"color:#a31515\">&quot;//*[@id='profile_pic2']&quot;</span>) != <span style=\"color:blue\">null</span>) Console.WriteLine(<span style=\"color:#a31515\">&quot;Match2&quot;</span>);\r\n<span style=\"color:blue\">if</span> (doc.GetElementbyId(<span style=\"color:#a31515\">&quot;profile_pic2&quot;</span>) != <span style=\"color:blue\">null</span>) Console.WriteLine(<span style=\"color:#a31515\">&quot;Match3&quot;</span>);\r\n</pre>\r\n</div>\r\n<p></p>\r\n<p>In html shouldn't be escaped \\&quot; symbols.<br>\r\nHtmlAgility pack makes them to (from debugger):<br>\r\n&#43;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp;&nbsp; Value&nbsp;&nbsp;&nbsp; Name: &quot;id&quot;, Value: &quot;\\\\\\&quot;profile_pic1\\\\\\&quot;&quot;&nbsp;&nbsp;&nbsp; HtmlAgilityPack.HtmlAttribute</p>\r\n<p>But I repeat myself: i don't believe that facebook uses mallformed html.</p>\r\n",
    "PostedDate": "2010-11-23T23:59:15.347-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]