[
  {
    "Id": "449197",
    "ThreadId": "214343",
    "Html": "<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=911\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=911</a><br>'NCrawler.Demo.vshost.exe' (Managed (v4.0.21006)): Loaded 'E:\\ncrawler\\Net 4.0\\NCrawler.Demo\\bin\\Release\\HtmlAgilityPack.dll', Symbols loaded.<br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=2\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=2</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=3\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=3</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=909\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=909</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=4\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=4</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=908\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=908</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=5\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=5</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=907\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=907</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=6\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=6</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=906\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=906</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=7\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=7</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=8\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=8</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=905\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=905</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=9\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=9</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=904\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=904</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=10\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=10</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=903\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=903</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>\r\n<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=11\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=11</a><br>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</p>",
    "PostedDate": "2010-05-30T01:00:21.253-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "449198",
    "ThreadId": "214343",
    "Html": "<p>NCrawler.Demo.vshost.exe Information: 0 : Downloading <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=489\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=489</a><br><strong>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</strong><br><strong>A first chance exception of type 'HtmlAgilityPack.EncodingFoundException' occurred in HtmlAgilityPack.dll</strong><br>NCrawler.Demo.vshost.exe Information: 0 : Crawl ended @ <a href=\"http://bbs.ifeng.com/forumdisplay.php?fid=349&page=911\">http://bbs.ifeng.com/forumdisplay.php?fid=349&amp;page=911</a> in 00:27:14.3754717<br>The thread 'vshost.RunParkingWindow' (0x1260) has exited with code 0 (0x0).<br>The thread '&lt;No Name&gt;' (0x1018) has exited with code 0 (0x0).<br>The program '[5888] NCrawler.Demo.vshost.exe: Managed (v4.0.21006)' has exited with code 0 (0x0).</p>",
    "PostedDate": "2010-05-30T01:02:42.65-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "449329",
    "ThreadId": "214343",
    "Html": "<p>First Chance Exceptions are nothing to worry about. The debugger raises these as an FYI. They are exceptions that are thrown but still caught before ever getting to your code. You'll find tons of these when doing work with System.IO. Like if you do a File.AppendAllText() to a file that doesn't exist you'll see a First Chance Exception thrown because the file was not found, so the .NET code creates the file and writes to it. Everything still works properly.</p>",
    "PostedDate": "2010-05-30T09:06:14.267-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "449481",
    "ThreadId": "214343",
    "Html": "<div style=\"color:black;background-color:white\">\r\n<pre>            Stream s = resp.GetResponseStream();\r\n            <span style=\"color:blue\">if</span> (s != <span style=\"color:blue\">null</span>)\r\n            {\r\n\r\n                <span style=\"color:blue\">if</span> (UsingCache)\r\n                {\r\n                    <span style=\"color:green\">// NOTE: LastModified does not contain milliseconds, so we remove them to the file</span>\r\n                    SaveStream(s, cachePath, RemoveMilliseconds(resp.LastModified), _streamBufferSize);\r\n\r\n                    <span style=\"color:green\">// save headers</span>\r\n                    SaveCacheHeaders(req.RequestUri, resp);\r\n\r\n                    <span style=\"color:blue\">if</span> (path != <span style=\"color:blue\">null</span>)\r\n                    {\r\n                        <span style=\"color:green\">// copy and touch the file</span>\r\n                        IOLibrary.CopyAlways(cachePath, path);\r\n                        File.SetLastWriteTime(path, File.GetLastWriteTime(cachePath));\r\n                    }\r\n                }\r\n                <span style=\"color:blue\">else</span>\r\n                {\r\n                    <span style=\"color:green\">// try to work in-memory</span>\r\n                    <span style=\"color:blue\">if</span> ((doc != <span style=\"color:blue\">null</span>) &amp;&amp; (html))\r\n                    {\r\n                        <span style=\"color:blue\">if</span> (respenc != <span style=\"color:blue\">null</span>)\r\n                        {\r\n                            doc.Load(s, respenc);\r\n                        }\r\n                        <span style=\"color:blue\">else</span>\r\n                        {\r\n                            <span style=\"color:blue\">using</span> (MemoryStream reader = <span style=\"color:blue\">new</span> MemoryStream())\r\n                            {\r\n                                <span style=\"color:blue\">const</span> <span style=\"color:blue\">int</span> bufferSize = 1024;\r\n                                <span style=\"color:blue\">byte</span>[] buffer = <span style=\"color:blue\">new</span> <span style=\"color:blue\">byte</span>[bufferSize];\r\n                                <span style=\"color:blue\">int</span> bytesRead, totalBytesRead = 0;\r\n                                <span style=\"color:blue\">while</span> ((bytesRead = s.Read(buffer, 0, bufferSize)) &gt; 0)\r\n                                {\r\n                                    totalBytesRead += bytesRead;\r\n                                    reader.Write(buffer, 0, bytesRead);\r\n                                }\r\n                                reader.Seek(0, SeekOrigin.Begin);\r\n                                doc.Load(reader, <span style=\"color:blue\">true</span>);\r\n\r\n                                <span style=\"color:green\">// &lt;meta http-equiv=&quot;Content-Type&quot; content=&quot;text/html; charset=gb2312&quot; /&gt;</span>\r\n                                <span style=\"color:blue\">string</span> pattern = <span style=\"color:#a31515\">&quot;&lt;meta[^&gt;]*charset=\\&quot;?([^\\&quot;]*)[^&gt;]*&gt;&quot;</span>; <span style=\"color:green\">// &quot;&lt;meta[^&gt;]*?charset=(\\\\w+)[\\\\W]*?&gt;&quot;;</span>\r\n                                System.Text.RegularExpressions.Regex r = <span style=\"color:blue\">new</span> System.Text.RegularExpressions.Regex(pattern);\r\n                                System.Text.RegularExpressions.Match m = r.Match(doc.DocumentNode.OuterHtml);\r\n                                <span style=\"color:green\">// </span>\r\n                                <span style=\"color:blue\">if</span> (m.Success)\r\n                                {\r\n                                    <span style=\"color:blue\">string</span> charSet = m.Groups[1].Value;\r\n                                    Encoding documentEncoding = Encoding.GetEncoding(charSet);\r\n                                    <span style=\"color:blue\">if</span> (documentEncoding != <span style=\"color:blue\">null</span>)\r\n                                    {\r\n                                        reader.Seek(0, SeekOrigin.Begin);\r\n                                        doc.Load(reader, documentEncoding, <span style=\"color:blue\">true</span>);\r\n                                    }\r\n                                }\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n\r\n                resp.Close();\r\n            }\r\n</pre>\r\n<pre>I change the code of HtmlWeb class, I chang the code of function of Get.</pre>\r\n</div>",
    "PostedDate": "2010-05-31T00:23:54.717-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]