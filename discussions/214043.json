[
  {
    "Id": "448084",
    "ThreadId": "214043",
    "Html": "<div style=\"color:black;background-color:white\">\r\n<pre>Hi,</pre>\r\n</div>\r\n<p>I have the following text and i need to replace the html structure &lt;ul&gt;&lt;li&gt;.....&lt;/li&gt;&lt;/ul&gt; by node text.</p>\r\n<p>I have the following code but i have always a error.</p>\r\n<p>Please who can help me?</p>\r\n<p>In advance thanks,</p>\r\n<p>Max.</p>\r\n<p>PS: i try to find more sample to use html agility but i cannot found it. Do know somebody for a great website with samples?</p>\r\n<p><span style=\"text-decoration:underline\"><strong>My code is:</strong></span></p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre><span style=\"color:blue\">var</span> doc = <span style=\"color:blue\">new</span> HtmlDocument();\r\n            <span style=\"color:blue\">var</span> tw = <span style=\"color:blue\">new</span> StringWriter();\r\n            doc.LoadHtml(text);\r\n            <span style=\"color:blue\">if</span>(doc.DocumentNode.SelectNodes(<span style=\"color:#a31515\">&quot;//ul&quot;</span>)!= <span style=\"color:blue\">null</span>)\r\n            {\r\n                <span style=\"color:blue\">foreach</span> (HtmlNode node <span style=\"color:blue\">in</span> doc.DocumentNode.SelectNodes(<span style=\"color:#a31515\">&quot;//ul&quot;</span>))\r\n                {\r\n                    <span style=\"color:blue\">var</span> newNodeUl = <span style=\"color:blue\">new</span> HtmlNode(HtmlNodeType.Text, doc, node.LinePosition);\r\n                    newNodeUl.InnerHtml = <span style=\"color:#a31515\">&quot;\\n&quot;</span>;\r\n                    node.ParentNode.InsertAfter(newNodeUl, node);\r\n                    \r\n                    <span style=\"color:blue\">if</span>(node.SelectNodes(<span style=\"color:#a31515\">&quot;//li&quot;</span>)!= <span style=\"color:blue\">null</span>)\r\n                    {\r\n                        <span style=\"color:blue\">foreach</span> (HtmlNode htmlNode <span style=\"color:blue\">in</span> node.SelectNodes(<span style=\"color:#a31515\">&quot;//li&quot;</span>))\r\n                        {\r\n                            <span style=\"color:green\">// replace li by -</span>\r\n                            <span style=\"color:blue\">var</span> newNodeLi = <span style=\"color:blue\">new</span> HtmlNode(HtmlNodeType.Text, doc, htmlNode.LinePosition);\r\n                            newNodeLi.InnerHtml = <span style=\"color:#a31515\">&quot;- &quot;</span>+ htmlNode.InnerHtml;\r\n                            newNodeUl.ChildNodes.Add(newNodeLi);\r\n                            node.RemoveChild(htmlNode);\r\n                        }\r\n                    }\r\n                    node.Remove();\r\n                }\r\n            }\r\n            doc.Save(tw);\r\n            <span style=\"color:blue\">var</span> returnval = tw.ToString();\r\n            tw.Close();\r\n            <span style=\"color:blue\">return</span> returnval;\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<p><span style=\"text-decoration:underline\"><strong>The text who need to parse is the following:</strong></span></p>\r\n<div style=\"color:black;background-color:white\">\r\n<pre>text texttext text text text text text text text\r\ntext texttext text text text\r\n\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">ul</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">li</span><span style=\"color:blue\">&gt;</span>1ste option<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">li</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">li</span><span style=\"color:blue\">&gt;</span>1ste option<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">li</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;</span><span style=\"color:#a31515\">li</span><span style=\"color:blue\">&gt;</span>1ste option<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">li</span><span style=\"color:blue\">&gt;</span>\r\n<span style=\"color:blue\">&lt;/</span><span style=\"color:#a31515\">ul</span><span style=\"color:blue\">&gt;</span>\r\n\r\ntext text text text text text text text text text \r\ntext text text text text text text text text text \r\n</pre>\r\n<pre><span style=\"text-decoration:underline\"><strong>And I need to have the following</strong></span>:</pre>\r\n<pre><div style=\"color:black;background-color:white\"><pre>text texttext text text text text text text text\r\ntext texttext text text text\r\n\r\n\\n\r\n- 1ste option\r\n- 1ste option\r\n- 1ste option\r\n\\n\r\n\r\ntext text text text text text text text text text \r\ntext text text text text text text text text text \r\n\r\n</pre>\r\n</div>\r\n</pre>\r\n<pre>\r\n\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>",
    "PostedDate": "2010-05-27T03:07:00.18-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]