[
  {
    "Id": "873402",
    "ThreadId": "373524",
    "Html": "\r\n<p>&nbsp;</p>\r\n<p>Hi. I hope someone can help me catch/work around this issue. because this has caused me days of lost work trying to debug this.</p>\r\n<p>I have a number of sites which I am trying to parse.&nbsp; take <a href=\"http://www.st-barnabas.org.uk\">\r\nwww.st-barnabas.org.uk</a>&nbsp;as an example. I try to load the responsestream into html agility pack, but i get a stack overflow (which i cant catch) and this makes everything fail</p>\r\n<p>&nbsp;</p>\r\n<p>Can anyone offer any advice?</p>\r\n<p>&nbsp;<span style=\"color:blue\">protected</span> <span style=\"color:blue\">string</span> DocFromStream(<span style=\"color:blue\">string</span> url, Stream stream,\r\n<span style=\"color:blue\">out</span> HtmlDocument doc)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nvar</span> htmlString = <span style=\"color:blue\">string</span>.Empty;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\ntry</span><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<span style=\"color:blue\">if</span> (stream != <span style=\"color:blue\">null</span>)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<span style=\"color:blue\">using</span> (<span style=\"color:blue\">var</span> sr = <span style=\"color:blue\">\r\nnew</span> StreamReader(stream))<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\r\n<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; htmlString = sr.ReadToEnd();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; sr.Close();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\ncatch</span> (Exception ex)<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; {<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; log.InfoFormat(<span style=\"color:#a31515\">&quot;could not load htmlstream from {0}: {1}&quot;</span>, url, ex);<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doc = <span style=\"color:blue\">\r\nnew</span> HtmlDocument();<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; doc.LoadHtml(htmlString);\r\n<span style=\"color:gray\">///</span><span style=\"color:green\">&lt;--- breaks here</span><br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; <span style=\"color:blue\">\r\nreturn</span> htmlString;<br>\r\n&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; }</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n<p>&nbsp;</p>\r\n",
    "PostedDate": "2012-07-18T05:35:51.457-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "898084",
    "ThreadId": "373524",
    "Html": "\r\n<p>I have the same issue on a multi-threading windows service -&gt; after days of debugging with help of windbg found the source of the problem to exact same endpoint htmlDocument.LoadHtml(stringInput);</p>\r\n<p>Does anyone has a fix for this?</p>\r\n<p>I think it is the same issue as this one&nbsp;<a href=\"http://htmlagilitypack.codeplex.com/workitem/30268\">http://htmlagilitypack.codeplex.com/workitem/30268</a>&nbsp;, but the fix from there does not seem very reliable :) the windows services are consuming\r\n a lot of memory after applying that fix.</p>\r\n<p>It would be really great if someone who knows what is doing could fix this.</p>\r\n",
    "PostedDate": "2012-08-10T07:58:48.483-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "914231",
    "ThreadId": "373524",
    "Html": "<p>i never get any error with this, maybe its will help to you.</p>\r\n<p>Goodluck</p>\r\n<p>&nbsp;</p>\r\n<div style=\"color: black; background-color: white;\">\r\n<pre> <span style=\"color: blue;\">public</span> <span style=\"color: blue;\">static</span> <span style=\"color: blue;\">string</span> GetURLData(<span style=\"color: blue;\">string</span> URL)\r\n        {\r\n            <span style=\"color: blue;\">try</span>\r\n            {\r\n                HttpWebRequest request = (HttpWebRequest)HttpWebRequest.Create(URL);\r\n                request.UserAgent = <span style=\"color: #a31515;\">\"Omurcek\"</span>;\r\n                request.Timeout = 4000;\r\n                WebResponse response = request.GetResponse();\r\n                Stream stream = response.GetResponseStream();\r\n                StreamReader reader = <span style=\"color: blue;\">new</span> StreamReader(stream);\r\n                <span style=\"color: blue;\">return</span> reader.ReadToEnd();\r\n            }\r\n            <span style=\"color: blue;\">catch</span> (Exception ex )\r\n            {\r\n                LogYaz(<span style=\"color: #a31515;\">\"Receive DATA Error : \"</span> + URL   + ex.ToString());\r\n                <span style=\"color: blue;\">return</span> <span style=\"color: #a31515;\">\"\"</span>;\r\n            }\r\n\r\n        }</pre>\r\n<pre><br /></pre>\r\n<pre> string Data = GetDataURL(\"www.abc.com\")</pre>\r\n<pre> HtmlAgilityPack.HtmlDocument doc<br /></pre>\r\n<pre>&nbsp;doc.LoadHtml(Data);\r\n\r\n</pre>\r\n</div>",
    "PostedDate": "2012-09-18T10:22:58.897-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]