[
  {
    "Id": "803831",
    "ThreadId": "346884",
    "Html": "\r\n<p>problem : using htmlagilitypack with c#<br>\r\n<br>\r\n<br>\r\nproblem : using htmlagilitypack with c#<br>\r\n<br>\r\nI can not use the [ htmlagilitypack with c# ] to enter page protected with username and password.<br>\r\n<br>\r\nif i use that code directly i have to use username and password to access this page , how i can use it with HtmlWeb ????</p>\r\n<pre><div style=\"color:black; background-color:white\"><pre style=\"padding-left:60px\"><span style=\"color:blue\">var</span> getInfo = <span style=\"color:blue\">new</span> HtmlWeb();<br>&nbsp;<span style=\"color:blue\">var</span> info= getInfo.Load(<span style=\"color:#a31515\">&quot;http://www.mysite.com/page.php&quot;</span>);<br>&nbsp;<span style=\"color:blue\">var</span> userName = info.DocumentNode.SelectNodes(<span style=\"color:#a31515\">&quot;//div[@class='username']&quot;</span>);<br>&nbsp;<span style=\"color:blue\">if</span> (userName != <span style=\"color:blue\">null</span>) { <br><br>String uname= gotoAdventure[0].InnerText; MessageBox.Show(uname); <br><br>}<br><br>The previous method does not work<br><br><br><br>i use that code to request that page and pass (username and password) and then save that <br>response  to temp.tmp file and then using HtmlWeb to load that file and getting  the information , and that method is very bad and ineffective<br><br><div style=\"color:black; background-color:white\"><pre>sendGetRequest(<span style=\"color:#a31515\">&quot;http://www.mysite.com/page.php?username=ali&amp;password=123123&quot;</span>);\r\n<span style=\"color:blue\">var</span> getInfo = <span style=\"color:blue\">new</span> HtmlWeb();\r\n<span style=\"color:blue\">var</span> info= getInfo.Load(<span style=\"color:#a31515\">&quot;e:/temp.tmp&quot;</span>);<br><br><br>The previous method does not work<br><br><br><br>i use that code to request that page and pass (username and password) and then save that <br>response  to temp.tmp file and then using HtmlWeb to load that file and getting  the information , and that method is very bad and ineffective<br><br>sendGetRequest(&quot;<a href=\"http://www.mysite.com/page.php?username=ali&password=123123\" target=\"_blank\">http://www.mysite.com/page.php?username=ali&amp;password=123123</a>&quot;\r\n<p>);<br><br></p><div style=\"color:black; background-color:white\"><pre><span style=\"color:blue\">var</span> getInfo = <span style=\"color:blue\">new</span> HtmlWeb();\r\n<span style=\"color:blue\">var</span> info= getInfo.Load(<span style=\"color:#a31515\">&quot;e:/temp.tmp&quot;</span>);\r\n \r\n</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n<p>&nbsp;</p>\r\n<pre><div style=\"color:black; background-color:white\"><pre> <span style=\"color:blue\">public</span> <span style=\"color:blue\">static</span> <span style=\"color:blue\">void</span> sendGetRequest(<span style=\"color:blue\">string</span> link) {<br><br>&nbsp;Random r = <span style=\"color:blue\">new</span> Random(((<span style=\"color:blue\">int</span>)DateTime.Now.Ticks));<br>&nbsp;<span style=\"color:blue\">string</span> filename = CreateRandomFileName(5, r); <br>HttpWebRequest request = (HttpWebRequest)WebRequest.Create(link); <br>request.Method = <span style=\"color:#a31515\">&quot;GET&quot;</span>; <br>request.KeepAlive = <span style=\"color:blue\">true</span>; <br>request.CookieContainer = cookies; <br>HttpWebResponse response = (HttpWebResponse)request.GetResponse();<br>&nbsp;Stream receiveStream = response.GetResponseStream();<br>&nbsp;StreamReader readStream = <span style=\"color:blue\">new</span> StreamReader(receiveStream, Encoding.UTF8); <br>TextWriter tW = <span style=\"color:blue\">new</span> StreamWriter(<span style=\"color:#a31515\">&quot;e:/temp.tmp&quot;</span>);<br>&nbsp;tW.Write(readStream.ReadToEnd()); <br>tW.Close(); <br><br>}\r\n</pre>\r\n</div>\r\n<br></pre>\r\nhow i can slove the problem , and using htmlagilitypack without save any file ???<br>&nbsp;</pre>\r\n</div>\r\n</pre>\r\n",
    "PostedDate": "2012-03-01T08:20:08.76-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "806780",
    "ThreadId": "346884",
    "Html": "<p>It seems that HttpWebRequest doesn't store the cookies. I suggest that you use a webbrowser control (with the navigate function to post your credentials) instead so that you get the session cookie properly &nbsp;and then get the resulting HtmlDocument.</p>\n<p>Also, beware that WebBrowser is Async so you'll need to \"wait\" for the browser document to come back before passing it to the HtmlAgility.Load() method or you'll get an empty document.</p>",
    "PostedDate": "2012-03-07T04:03:16.753-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "807231",
    "ThreadId": "346884",
    "Html": "<blockquote style=\"border: solid .1em #ccc; font-style: italic; margin: .25em 1em 0 1em; padding: 0 .25em 0 .25em;\"><strong>nexus1703 wrote:</strong><br />\r\n<p>It seems that HttpWebRequest doesn't store the cookies. I suggest that you use a webbrowser control (with the navigate function to post your credentials) instead so that you get the session cookie properly &nbsp;and then get the resulting HtmlDocument.</p>\r\n<p>Also, beware that WebBrowser is Async so you'll need to \"wait\" for the browser document to come back before passing it to the HtmlAgility.Load() method or you'll get an empty document.</p>\r\n</blockquote>\r\n<p>HttpWebRequest has a cookie jar. It's just up to the developer to supply the cookies, for example by copying them from an HttpWebResponse obtained from a previous request.</p>\r\n<p>HAP's HtmlWeb object has a UseCookies property. You could try setting that to true, posting to a login page using the PreRequest event to supply the form data, then going after the actual page. If that doesn't work, use the PostResponse event on the first request to extract the session cookie and the PreRequest event on the second to reinject it.</p>\r\n<p>If the server's using HTTP authentication rather than forms &amp; cookies, it's much easier: just use one of the overloads of HtmlWeb.Load() that allow you to supply a username and password: HtmlWeb.Load(string url, string method, WebProxy proxy, NetworkCredential credential) or HtmlWeb.Load(string url, string proxyHost, int proxyPort, string userId, string password)</p>",
    "PostedDate": "2012-03-07T18:03:30.837-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  },
  {
    "Id": "808537",
    "ThreadId": "346884",
    "Html": "<p>&nbsp;</p>\n<pre>...\n\nCookieContainer container = new CookieContainer();\n...\n\n//Previous query\nresponse = request.GetResponse() as HttpWebResponse;\ncontainer.Add(response.Cookies);\n\n//Next query with cookies\nrequest = HttpWebRequest.Create(new Uri(url)) as HttpWebRequest; � � � � � � ��\nrequest.CookieContainer = container;\nresponse = request.GetResponse() as HttpWebResponse;\ncontainer.Add(response.Cookies);\n...</pre>\n<p>&nbsp;</p>\n<p>...and so on...</p>",
    "PostedDate": "2012-03-10T11:04:03.527-08:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]