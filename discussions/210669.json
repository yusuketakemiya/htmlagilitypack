[
  {
    "Id": "435853",
    "ThreadId": "210669",
    "Html": "While trying to reconstruct simple html content, I run into the problem that HAP mis-parses certain commonly unclosed elements.\r\n<br><br>\r\n<br><br>For example:\r\n<br>\r\n<br>&lt;html&gt;&lt;body&gt;\r\n<br>&lt;ul&gt;\r\n<br>&nbsp;&nbsp;&lt;li&gt;TestElem1\r\n<br>&nbsp;&nbsp;&lt;li&gt;TestElem2\r\n<br>&nbsp;&nbsp;&lt;li&gt;TestElem3 List:\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Nested1\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Nested2&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Nested3\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;\r\n<br>&nbsp;&nbsp;&lt;li&gt;TestElem4\r\n<br>&lt;/ul&gt;\r\n<br>&lt;p&gt;paragraph 1\r\n<br>&lt;p&gt;paragraph 2\r\n<br>&lt;p&gt;paragraph 3\r\n<br>&lt;/body&gt;&lt;/html&gt;\r\n<br>\r\n<br>is misparsed as (using xml-style formatting with manually editted whitespace to highlight the problematic nesting):\r\n<br>\r\n<br>&lt;?xml version=&quot;1.0&quot; encoding=&quot;iso-8859-1&quot;?&gt;&lt;html&gt;&lt;body&gt;\r\n<br>&lt;ul&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;TestElem1\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;TestElem2\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;TestElem3 List:\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;ul&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Nested1\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Nested2&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;Nested3&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/ul&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;li&gt;TestElem4&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;\r\n<br>&nbsp;&nbsp;&nbsp;&nbsp;&lt;/li&gt;\r\n<br>&lt;/ul&gt;\r\n<br>&lt;p /&gt;paragraph 1\r\n<br>&lt;p /&gt;paragraph 2\r\n<br>&lt;p /&gt;paragraph 3\r\n<br>&lt;/body&gt;&lt;/html&gt;\r\n<br>\r\n<br>Which of course isn't correct - unclosed li tags should be closed when the next li tag in the same ul is found opened or at the end of the ul tag, and successive p tags should be left open until the next p (or other block level?) tag.",
    "PostedDate": "2010-04-27T02:21:03.537-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]