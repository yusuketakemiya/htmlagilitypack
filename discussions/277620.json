[
  {
    "Id": "691102",
    "ThreadId": "277620",
    "Html": "\r\n<p>i have this code:</p>\r\n<div style=\"color:black; background-color:white\">\r\n<pre><div style=\"color:black; background-color:white\"><pre>\r\n                HtmlAgilityPack.HtmlWeb loader = <span style=\"color:blue\">new</span> HtmlAgilityPack.HtmlWeb();\r\n                <span style=\"color:blue\">var</span> doc = loader.Load(<span style=\"color:#a31515\">&quot;http://megahits.sapo.pt/&quot;</span>);\r\n\r\n                <span style=\"color:green\">//firstly, find the div node which its id is locutor</span>\r\n                <span style=\"color:blue\">var</span> divNode = doc.DocumentNode.SelectSingleNode(<span style=\"color:#a31515\">&quot;//div[@id='locutor']&quot;</span>);\r\n                <span style=\"color:green\">//secondly, find the img node in the divNode</span>\r\n                <span style=\"color:blue\">var</span> srcNode = divNode.SelectSingleNode(<span style=\"color:#a31515\">&quot;//img[@src]&quot;</span>);\r\n                <span style=\"color:green\">//the last, retrieve the value of the src property in the img node</span>\r\n                <span style=\"color:blue\">string</span> src = srcNode.GetAttributeValue(<span style=\"color:#a31515\">&quot;src&quot;</span>, <span style=\"color:#a31515\">&quot;none value&quot;</span>);\r\n</pre>\r\n<pre>the problem is  the var divnode in inner html is reading correctly all div tags and when going to get the img src tag is returning and empty string if someone can clarefy me i think is a bug or the htmlaggility pack </pre>\r\n<pre>how ever a workarround is that: </pre>\r\n<pre> </pre>\r\n</div>\r\n</pre>\r\n<pre><div style=\"color:black; background-color:white\"><pre>   <span style=\"color:blue\">string</span> pageUrl = <span style=\"color:#a31515\">&quot;http://megahits.sapo.pt/&quot;</span>;\r\n\r\n                HtmlAgilityPack.HtmlWeb hDoc = <span style=\"color:blue\">new</span> HtmlAgilityPack.HtmlWeb();\r\n                <span style=\"color:blue\">var</span> doc = hDoc.Load(pageUrl);\r\n\r\n\r\n\r\n\r\n                <span style=\"color:blue\">var</span> divNode = doc.DocumentNode.SelectSingleNode(<span style=\"color:#a31515\">&quot;//div[@id='locutor']&quot;</span>);\r\n                <span style=\"color:blue\">string</span> src1 = divNode.InnerHtml;\r\n                <span style=\"color:blue\">int</span> startIndex = src1.IndexOf(<span style=\"color:#a31515\">'h'</span>);\r\n                <span style=\"color:blue\">int</span> endIndex = src1.IndexOf(<span style=\"color:#a31515\">&quot;png&quot;</span>) &#43; 3;\r\n                <span style=\"color:blue\">string</span> strSrc = src1.Substring(startIndex, (src1.Length - startIndex) - (src1.Length - endIndex));\r\n</pre>\r\n<pre>butwhy the frist code is givving empty string</pre>\r\n</div>\r\n</pre>\r\n</div>\r\n",
    "PostedDate": "2011-10-29T04:40:08.353-07:00",
    "UserRole": null,
    "MarkedAsAnswerDate": null
  }
]